"use strict";var r=Object.defineProperty;var i=(o,t,s)=>t in o?r(o,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[t]=s;var C=(o,t,s)=>(i(o,typeof t!="symbol"?t+"":t,s),s);class a{constructor(){C(this,"pools",{})}remove(t,s,e){const n=this.pools[t]&&this.pools[t][s];n&&(this.pools[t][s]=n.filter(E=>E!==e))}clear(t){this.pools[t]={}}on(t,s){return this.pools[t]||(this.pools[t]={}),this.pools[t][s.name]||(this.pools[t][s.name]=[]),this.pools[t][s.name].push(s.callback),this.pools[t][s.name].includes(s.callback)}emit(t,s,...e){this.pools[t]||(this.pools[t]={});const n=this.pools[t][s];n&&n.forEach(E=>{try{E(...e)}catch(c){console.error(`${s} monitor event exception！`,c)}})}}const A=new a,_="onSave",R="changeCatalogVisible",p="changeFullscreen",L="pageFullscreenChanged",h="fullscreenChanged",u="previewChanged",N="htmlPreviewChanged",g="catalogVisibleChanged",G="buildFinished",H="errorCatcher",I="replace",D="uploadImage",S="openModals",T="ctrlZ",d="ctrlShiftZ",O="catalogChanged",F="pushCatalog",b="rerender",P=(o,t="image.png")=>{const s=o.split(","),e=s[0].match(/:(.*?);/);if(e){const l=e[1],n=atob(s[1]);let E=n.length;const c=new Uint8Array(E);for(;E--;)c[E]=n.charCodeAt(E);return new File([c],t,{type:l})}return null},f=o=>{if(!o)return o;const t=o.split(`
`),s=['<span rn-wrapper aria-hidden="true">'];return t.forEach(()=>{s.push("<span></span>")}),s.push("</span>"),`<span class="code-block">${o}</span>${s.join("")}`},U=(o,t)=>{if(!o||!t)return 0;const s=o==null?void 0:o.getBoundingClientRect();if(t===document.documentElement)return s.top-t.clientTop;const e=t==null?void 0:t.getBoundingClientRect();return s.top-e.top};exports.BUILD_FINISHED=G;exports.CATALOG_CHANGED=O;exports.CATALOG_VISIBLE_CHANGED=g;exports.CHANGE_CATALOG_VISIBLE=R;exports.CHANGE_FULL_SCREEN=p;exports.CTRL_SHIFT_Z=d;exports.CTRL_Z=T;exports.ERROR_CATCHER=H;exports.FULL_SCREEN_CHANGED=h;exports.HTML_PREVIEW_CHANGED=N;exports.ON_SAVE=_;exports.OPEN_MODALS=S;exports.PAGE_FULL_SCREEN_CHANGED=L;exports.PREVIEW_CHANGED=u;exports.PUSH_CATALOG=F;exports.REPLACE=I;exports.RERENDER=b;exports.UPLOAD_IMAGE=D;exports.base642File=P;exports.bus=A;exports.generateCodeRowNumber=f;exports.getRelativeTop=U;
